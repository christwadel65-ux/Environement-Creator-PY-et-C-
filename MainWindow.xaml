<Window x:Class="EnvironmentCreator.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Environment Creator"
    Width="900"
    Height="820"
    MinHeight="780"
    MinWidth="860"
    WindowStartupLocation="CenterScreen"
    Background="#f6f6f8">
    <Window.Resources>
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="0 8 0 8"/>
            <Setter Property="BorderBrush" Value="#d9d9e0"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        <Style TargetType="TextBlock" x:Key="LabelText">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#2b2b2b"/>
            <Setter Property="Margin" Value="0 0 0 4"/>
        </Style>
        <Style TargetType="Button" x:Key="PrimaryButton">
            <Setter Property="Background" Value="#2563eb"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="12 8"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderBrush" Value="#1d4ed8"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style TargetType="Button" x:Key="GhostButton">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#1f2937"/>
            <Setter Property="Padding" Value="12 8"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderBrush" Value="#e5e7eb"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header and inputs -->
        <StackPanel Grid.Row="0">
            <TextBlock Text="Environment Creator" FontSize="24" FontWeight="Bold" Margin="0 0 0 12"/>

            <Grid Margin="0 0 0 12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="2*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Margin="0 0 12 0">
                    <TextBlock Text="Name" Style="{StaticResource LabelText}"/>
                    <TextBox x:Name="NameBox" Height="34" Padding="6 4"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Margin="12 0 0 0">
                    <TextBlock Text="Path" Style="{StaticResource LabelText}"/>
                    <DockPanel LastChildFill="True">
                        <TextBox x:Name="PathBox" Height="34" Padding="6 4" DockPanel.Dock="Left" MinWidth="200"/>
                        <Button Content="..." Width="40" Margin="8 0 0 0" Click="Browse_Click" HorizontalAlignment="Right"/>
                    </DockPanel>
                </StackPanel>
            </Grid>

            <StackPanel Orientation="Horizontal" Margin="0 0 0 12">
                <TextBlock Text="Environment Type" Style="{StaticResource LabelText}" Margin="0 0 12 0"/>
                <RadioButton x:Name="PythonRadio" Content="Python" IsChecked="True" Checked="EnvironmentType_Checked" Margin="0 0 12 0"/>
                <RadioButton x:Name="CSharpRadio" Content="C#" Checked="EnvironmentType_Checked"/>
            </StackPanel>
        </StackPanel>

        <!-- Libraries (no scroll) -->
        <StackPanel Grid.Row="1" x:Name="LibraryStack">
                <StackPanel x:Name="PythonPanel">
                    <Border Style="{StaticResource Card}">
                        <Expander Header="Data Science &amp; ML" IsExpanded="True">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="140" ItemHeight="28">
                                <CheckBox Content="NumPy" Tag="python"/>
                                <CheckBox Content="Pandas" Tag="python"/>
                                <CheckBox Content="Scikit-learn" Tag="python"/>
                                <CheckBox Content="TensorFlow" Tag="python"/>
                                <CheckBox Content="PyTorch" Tag="python"/>
                            </WrapPanel>
                        </Expander>
                    </Border>

                    <Border Style="{StaticResource Card}">
                        <Expander Header="Web &amp; Scraping" IsExpanded="True">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="140" ItemHeight="28">
                                <CheckBox Content="Flask" Tag="python"/>
                                <CheckBox Content="Django" Tag="python"/>
                                <CheckBox Content="FastAPI" Tag="python"/>
                                <CheckBox Content="Beautiful Soup" Tag="python"/>
                                <CheckBox Content="Scrapy" Tag="python"/>
                            </WrapPanel>
                        </Expander>
                    </Border>

                    <Border Style="{StaticResource Card}">
                        <Expander Header="Utilities &amp; Testing" IsExpanded="True">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="140" ItemHeight="28">
                                <CheckBox Content="Requests" Tag="python"/>
                                <CheckBox Content="Matplotlib" Tag="python"/>
                                <CheckBox Content="Pytest" Tag="python"/>
                                <CheckBox Content="python-dotenv" Tag="python"/>
                                <CheckBox Content="Black" Tag="python"/>
                                <CheckBox Content="Jupyter" Tag="python"/>
                            </WrapPanel>
                        </Expander>
                    </Border>

                    <Border Style="{StaticResource Card}">
                        <Expander Header="Data &amp; Infra" IsExpanded="True">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="140" ItemHeight="28">
                                <CheckBox Content="SQLAlchemy" Tag="python"/>
                                <CheckBox Content="Redis" Tag="python"/>
                                <CheckBox Content="Celery" Tag="python"/>
                                <CheckBox Content="Pillow" Tag="python"/>
                                <CheckBox Content="Alembic" Tag="python"/>
                            </WrapPanel>
                        </Expander>
                    </Border>

                    <Border Style="{StaticResource Card}">
                        <Expander Header="Typing &amp; Validation" IsExpanded="False">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="140" ItemHeight="28">
                                <CheckBox Content="Pydantic" Tag="python"/>
                                <CheckBox Content="Click" Tag="python"/>
                            </WrapPanel>
                        </Expander>
                    </Border>
                </StackPanel>

                <StackPanel x:Name="CSharpPanel" Visibility="Collapsed">
                    <Border Style="{StaticResource Card}">
                        <Expander Header="Data &amp; Serialization" IsExpanded="True">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="150" ItemHeight="28">
                                <CheckBox Content="Entity Framework Core" Tag="csharp"/>
                                <CheckBox Content="Dapper" Tag="csharp"/>
                                <CheckBox Content="Newtonsoft.Json" Tag="csharp"/>
                            </WrapPanel>
                        </Expander>
                    </Border>

                    <Border Style="{StaticResource Card}">
                        <Expander Header="Web &amp; Architecture" IsExpanded="True">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="150" ItemHeight="28">
                                <CheckBox Content="ASP.NET Core" Tag="csharp"/>
                                <CheckBox Content="Swagger/OpenAPI" Tag="csharp"/>
                                <CheckBox Content="MediatR" Tag="csharp"/>
                            </WrapPanel>
                        </Expander>
                    </Border>

                    <Border Style="{StaticResource Card}">
                        <Expander Header="Testing &amp; Resilience" IsExpanded="True">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="150" ItemHeight="28">
                                <CheckBox Content="xUnit" Tag="csharp"/>
                                <CheckBox Content="NUnit" Tag="csharp"/>
                                <CheckBox Content="Serilog" Tag="csharp"/>
                                <CheckBox Content="Polly" Tag="csharp"/>
                                <CheckBox Content="FluentAssertions" Tag="csharp"/>
                            </WrapPanel>
                        </Expander>
                    </Border>

                    <Border Style="{StaticResource Card}">
                        <Expander Header="API &amp; Infra" IsExpanded="True">
                            <WrapPanel Margin="0 8 0 0" ItemWidth="150" ItemHeight="28">
                                <CheckBox Content="Refit" Tag="csharp"/>
                                <CheckBox Content="Autofac" Tag="csharp"/>
                                <CheckBox Content="NLog" Tag="csharp"/>
                                <CheckBox Content="RabbitMQ" Tag="csharp"/>
                                <CheckBox Content="MongoDB" Tag="csharp"/>
                                <CheckBox Content="GraphQL .NET" Tag="csharp"/>
                                <CheckBox Content="IdentityModel" Tag="csharp"/>
                                <CheckBox Content="Hangfire" Tag="csharp"/>
                                <CheckBox Content="EF Core Tools" Tag="csharp"/>
                            </WrapPanel>
                        </Expander>
                    </Border>
                </StackPanel>
            </StackPanel>


        <!-- Buttons fixed at bottom -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0 12 0 0">
            <Button x:Name="CreateButton" Content="Create" Style="{StaticResource PrimaryButton}" Width="120" Click="Create_Click" Margin="0 0 8 0"/>
            <Button x:Name="ClearButton" Content="Clear" Style="{StaticResource GhostButton}" Width="120" Click="Clear_Click"/>
        </StackPanel>
    </Grid>
</Window>
